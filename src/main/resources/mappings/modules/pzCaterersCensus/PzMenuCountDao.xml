<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dhc.rad.modules.pzCaterersCensus.dao.PzMenuCountDao">


    <resultMap id="menuCountMap" type="com.dhc.rad.modules.pzCaterersCensus.entity.PzMenuCount">
        <!--team中的基本属性-->
        <id column="menuId" property="menu_id"/>
        <result column="menuName" property="menu_name"/>
        <result column="menuCount" property="menuCount"/>
    </resultMap>




    <select id="selectNextWeekCount" resultMap="menuCountMap">
    SELECT
	po.MENU_ID,
	pm.MENU_NAME,
	count( po.MENU_ID ) AS MENU_COUNT
    FROM
	pz_order po LEFT JOIN pz_menu pm on po.MENU_ID=pm.ID
    WHERE
	 po.EAT_DATE = #{EAT_DATE}
	AND po.RESTAURANT_ID = #{restaurantId}
    <if test ="null != noEatDate and ''!= noEatDate">AND po.NO_EAT_DATE NOT REGEXP #{noEatDate}</if>
    GROUP BY
	po.MENU_ID;
    </select>








</mapper>